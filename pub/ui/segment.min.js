!function(root,ax_super){var U=ax5.util,axd=ax5.dom,ax_class=function(){this.main=function(){ax_super&&ax_super.call(this),this.config={theme:"default"}}.apply(this,arguments),this.target=null;var _this=this,cfg=this.config;this.init=function(){cfg.target||U.error("aui_segment_400","[ax5.ui.segment] config.target is required"),this.target=ax5.dom(cfg.target),this.target.after(this._get_frame(this.target.elt().id)),this.els={root:axd('[data-segment-origin-id="'+this.target.elt().id+'"]')},this._set_size_frame(),this.bind_window_resize(function(){this._set_size_frame()}),setTimeout(function(){_this._set_size_frame()},500),this.set_value(this.target.val()),this.target.on("change",function(){_this.set_value(_this.target.val())}),this.els.root.find("[data-segment-item-index]").on("click",function(e){_this._onclick(e||window.event)})},this._onclick=function(e,target,index,that){if(target=axd.parent(e.target,function(target){return axd.attr(target,"data-segment-item-index")?!0:void 0})){index=axd.attr(target,"data-segment-item-index");var item=cfg.list[index];_this.target.val(item.value),_this.target.dispatch_event("change"),that={list:cfg.list,index:index,target:this.target.elements[0]},cfg.onclick&&cfg.onclick.call(that)}},this._set_size_frame=this.alignment=function(){this.els.root.css({top:0,left:0,width:this.target.width(),height:this.target.height()})},this._get_frame=function(origin_id){ax5.dom('[data-segment-origin-id="'+origin_id+'"]').remove();var po=[];po.push('<div class="ax5-ui-segment-group '+cfg.theme+'" data-segment-els="root" data-segment-origin-id="'+origin_id+'">'),po.push('<table cellpadding="0" cellspacing="0" style="height:100%;">'),po.push("<tbody>"),po.push("<tr>");for(var item,i=0,l=cfg.list.length;l>i;i++)item=cfg.list[i],po.push("<td>"),po.push('<div class="ax-item-wraper"><button class="ax-btn '+(item.klass||"")+'" data-segment-item-index="'+i+'" '+function(){return 0==i?'data-segment-item-first="1"':i==cfg.list.length-1?'data-segment-item-last="1"':void 0}()+">"+(item.text||"")+"</buttton></div>"),po.push("</td>");return po.push("</tr>"),po.push("</tbody>"),po.push("</table>"),po.push("</div>"),po.join("")},this.set_value=function(val){var selected_item,selected_index;this.els.root.find("[data-segment-item-index]").class_name("remove","on");for(var item,i=0,l=cfg.list.length;l>i;i++)item=cfg.list[i],item.value==val&&(selected_item=item,selected_index=i);selected_item&&this.els.root.find('[data-segment-item-index="'+selected_index+'"]').class_name("add","on")}};U.is_function(ax_super)&&(ax_class.prototype=new ax_super),root.segment=ax_class,"function"==typeof define&&define.amd&&define("_ax5_ui_segment",[],function(){return ax_class})}(ax5.ui,ax5.ui.root);