!function(root,ax_super){var e_touch_start,e_touch_move,e_touch_end,U=ax5.util,axd=ax5.dom;"ontouchstart"in document.documentElement?(e_touch_start="touchstart",e_touch_move="touchmove",e_touch_end="touchend"):(e_touch_start="mousedown",e_touch_move="mousemove",e_touch_end="mouseup");var ax_class=function(){this.main=function(){ax_super&&ax_super.call(this),this.config={effect:"",autoSlide:!1,slideSpeed:300,touchMove:!1,targetHeightRatio:0}}.apply(this,arguments),this.target=null;var _this=this,cfg=this.config,touch_start={},touch_end={};this.display_index=0,this.get_mouse=function(e){var mouse={};return"changedTouches"in e?(mouse.x=Number(e.changedTouches[0].pageX),mouse.y=Number(e.changedTouches[0].pageY)):"touches"in e&&e.touches[0]?(mouse.x=Number(e.touches[0].pageX),mouse.y=Number(e.touches[0].pageY)):(mouse.x=Number(e.pageX),mouse.y=Number(e.pageY)),mouse},this.init=function(){this.target=ax5.dom(cfg.target),this.target.css({position:"relative"}),this.els={holder:this.target.find("[data-horizontal-scroller-content]")},this.bind_window_resize(function(){this._set_size_frame()}),setTimeout(function(){_this._set_size_frame()},300),this.target.on(e_touch_start,function(e){_this._on_touch_start(e||window.event)})},this._set_size_frame=this.align=function(){var ct_width=this.target.width();ct_width>0&&(this.item_width=ct_width,this.holder_width=this.els.holder.width())},this._on_touch_start=function(e){if(this.item_width>this.holder_width)return!1;if(touch_start={mouse:_this.get_mouse(e),time:(new Date).getTime(),position:this.els.holder.position()},this.els.holder.class_name("remove","ax5-ui-horizontal-scroller-touch-end"),axd(document.body).on(e_touch_move+".ax5hrozontalscroller",function(e){_this._on_touch_move(e||window.event)}),axd(document.body).on(e_touch_end+".ax5hrozontalscroller",function(e){_this._on_touch_end(e||window.event)}),axd(document.body).attr({onselectstart:"return false;"}),cfg.on_event){var that={action:"touch_start"};cfg.on_event.call(that,that)}},this._on_touch_move=function(e){var mouse=_this.get_mouse(e);if(!touch_start.direction){var dx=Math.abs(touch_start.mouse.x-mouse.x),dy=2*Math.abs(touch_start.mouse.y-mouse.y);touch_start.direction=dx>dy?"X":"Y"}if("X"==touch_start.direction){var new_left=Number(touch_start.position.left)-(touch_start.mouse.x-mouse.x);new_left>0?new_left=0:new_left<-(this.holder_width-this.item_width)&&(new_left=-(this.holder_width-this.item_width)),this.els.holder.css({left:new_left}),touch_start.time=(new Date).getTime(),touch_start.new_left=new_left,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}else axd(document.body).off(e_touch_move+".ax5hrozontalscroller"),axd(document.body).off(e_touch_end+".ax5hrozontalscroller"),axd(document.body).attr({onselectstart:null})},this._on_touch_end=function(e){if(touch_end={mouse:_this.get_mouse(e),time:(new Date).getTime()},"X"==touch_start.direction){var du_time=touch_end.time-touch_start.time,extra_move=0,new_left=touch_start.new_left;120>du_time&&Math.abs(touch_start.mouse.x-touch_end.mouse.x)>5&&(extra_move=-(touch_start.mouse.x-touch_end.mouse.x)*(10/(du_time||.1)),new_left=Number(new_left)+extra_move,new_left>0?new_left=0:new_left<-(this.holder_width-this.item_width)&&(new_left=-(this.holder_width-this.item_width)),this.els.holder.css({left:new_left}).class_name("add","ax5-ui-horizontal-scroller-touch-end")),axd(document.body).off(e_touch_move+".ax5hrozontalscroller"),axd(document.body).off(e_touch_end+".ax5hrozontalscroller"),axd(document.body).attr({onselectstart:null})}}};U.is_function(ax_super)&&(ax_class.prototype=new ax_super),root.horizontal_scroller=ax_class,"function"==typeof define&&define.amd&&define("_ax5_ui_horizontal_scroller",[],function(){return ax_class})}(ax5.ui,ax5.ui.root);