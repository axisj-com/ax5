!function(root,ax_super){var U=ax5.util,axd=ax5.dom,ax_class=function(){this.main=function(){ax_super&&ax_super.call(this),this.config={click_event_name:"ontouchstart"in document.documentElement?"touchstart":"click",theme:"default",mode:"day",week_names:[{name:"SUN"},{name:"MON"},{name:"TUE"},{name:"WED"},{name:"THU"},{name:"FRI"},{name:"SAT"}],display_date:new Date}}.apply(this,arguments),this.target=null;var cfg=this.config;this.init=function(){cfg.target||U.error("aui_calendar_400","[ax5.ui.calendar] config.target is required"),this.target=ax5.dom(cfg.target),this.target.html(this.get_frame()),this.els={root:this.target.find('[data-calendar-els="root"]')},this.print(cfg.mode,cfg.display_date)},this.get_frame=function(){var po=[];return po.push('<div class="ax5-ui-calendar '+cfg.theme+'" data-calendar-els="root">'),po.push("</div>"),po.join("")},this.print=function(mode,now_date){var dot_date=U.date(now_date),po=[],month_start_date=new Date(dot_date.getFullYear(),dot_date.getMonth(),1,12),table_start_date=function(){var day=month_start_date.getDay();return 0==day&&(day=7),U.date(month_start_date,{add:{d:-day}})}();console.log(month_start_date,table_start_date),po.push('<table data-calendar-table="'+mode+'">');for(var i=0;6>i;){po.push("<tr>");for(var k=0;7>k;)po.push("<td>"),po.push("</td>"),k++;po.push("</tr>"),i++}po.push("</table>"),this.els.root.html(po.join("")),this.els.root.find("[data-calendar-item-index]").on(cfg.click_event_name,function(e){this.onclick(e||window.event)}.bind(this))},this.onclick=function(e,target,index){target=axd.parent(e.target,function(target){return ax5.dom.attr(target,"data-calendar-item-index")?!0:void 0}),target&&(index=axd.attr(target,"data-calendar-item-index"),this.config.onclick&&this.config.onclick.call({keys:this.config.board.keys,item:this.config.board.keys[index],target:cfg.target.elements[0],item_target:target}))}};U.is_function(ax_super)&&(ax_class.prototype=new ax_super),root.calendar=ax_class,"function"==typeof define&&define.amd&&define("_ax5_ui_calendar",[],function(){return ax_class})}(ax5.ui,ax5.ui.root);