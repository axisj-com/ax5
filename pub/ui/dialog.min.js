!function(root,ax_super){var U=ax5.util,axd=ax5.dom,ax_class=function(){this.main=function(){ax_super&&ax_super.call(this),this.config={click_event_name:"ontouchstart"in document.documentElement?"touchstart":"click",mask:{target:document.body,content:""},theme:"default",width:300,title:"",msg:"",btns:{ok:{label:"ok"}}}}.apply(this,arguments);var cfg=this.config;this.init=function(){cfg.id="ax5-dialog-"+ax5.get_guid(),this.mask=new ax5.ui.mask,this.mask.set_config(cfg.mask)},this.get_content=function(dialog_id,opts){var po=[];return po.push('<div id="'+dialog_id+'" data-ax5-ui="dialog" class="ax5-ui-dialog '+opts.theme+'">'),po.push('<div class="ax-dialog-heading">'),po.push(opts.title||cfg.title||""),po.push("</div>"),po.push('<div class="ax-dialog-body">'),po.push('<div class="ax-dialog-msg">'),po.push((opts.msg||cfg.msg||"").replace(/\n/g,"<br/>")),po.push("</div>"),po.push('<div class="ax-dialog-buttons">'),U.each(opts.btns,function(k){po.push('<button type="button" data-ax-dialog-btn="'+k+'" class="ax-btn '+opts.theme+'">'+this.label+"</button>")}),po.push("</div>"),po.push("</div>"),po.push("</div>"),po.join("")},this.alert=function(opts,callback){var dialog_target,pos={},box={};opts.id=opts.id||cfg.id,opts.dialog_type="alert",opts.theme=opts.theme||cfg.theme||"","undefined"==typeof opts.btns&&(opts.btns=U.clone(cfg.btns)),this.mask.open(),box={width:opts.width||cfg.width},axd.append(document.body,this.get_content(opts.id,opts)),dialog_target=ax5.dom("#"+opts.id),dialog_target.css({width:box.width}),box.height=dialog_target.height(),"undefined"==typeof opts.position||"center"===opts.position?(pos.top=ax5.dom.height(document.body)/2-box.height/2,pos.left=ax5.dom.width(document.body)/2-box.width/2):(pos.left=opts.position.left||0,pos.top=opts.position.top||0),dialog_target.css(pos),dialog_target.find("[data-ax-dialog-btn]").elements[0].focus(),dialog_target.find("[data-ax-dialog-btn]").on(cfg.click_event_name,function(e){this.btn_onclick(e||window.event,dialog_target,opts,callback)}.bind(this)),axd(window).on("keydown",function(e){this.onkeyup(e||window.event,dialog_target,opts,callback)}.bind(this))},this.btn_onclick=function(e,dialog_target,opts,callback,target,k){if(target=axd.parent(e.target,function(target){return ax5.dom.attr(target,"data-ax-dialog-btn")?!0:void 0})){k=axd.attr(target,"data-ax-dialog-btn");var that={key:k,value:opts.btns[k],dialog_id:opts.id,item_target:target};opts.btns[k].onclick?opts.btns[k].onclick.call(that):"ok"===k&&callback&&callback.call(that),"alert"===opts.dialog_type&&(dialog_target.remove(),this.mask.close())}},this.onkeyup=function(e,dialog_target){e.keyCode==ax5.info.event_keys.ESC&&(dialog_target.remove(),this.mask.close())}};U.is_function(ax_super)&&(ax_class.prototype=new ax_super),root.dialog=ax_class,"function"==typeof define&&define.amd&&define("_ax5_ui_dialog",[],function(){return ax_class})}(ax5.ui,ax5.ui.root);